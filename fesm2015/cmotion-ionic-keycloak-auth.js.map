{"version":3,"file":"cmotion-ionic-keycloak-auth.js","sources":["ng://@cmotion/ionic-keycloak-auth/lib/contant/deep-linking-config-injection-token.ts","ng://@cmotion/ionic-keycloak-auth/lib/contant/jwt-injection-token.ts","ng://@cmotion/ionic-keycloak-auth/lib/contant/kc-injection-token.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/auth-token.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/deep-link-config.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/id-token-decoded.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/jwt-config.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/kc-config.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/key-value-str.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/keycloak-json-structure.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/keycloak-login-response.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/module-config.ts","ng://@cmotion/ionic-keycloak-auth/lib/model/token-decoded.ts","ng://@cmotion/ionic-keycloak-auth/lib/service/deep-link.service.ts","ng://@cmotion/ionic-keycloak-auth/lib/service/storage.service.ts","ng://@cmotion/ionic-keycloak-auth/lib/service/keycloak-auth.service.ts","ng://@cmotion/ionic-keycloak-auth/lib/service/kc-token-interceptor.service.ts","ng://@cmotion/ionic-keycloak-auth/lib/ionic-keycloak-auth.module.ts"],"sourcesContent":["/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {InjectionToken} from '@angular/core';\n\nexport const DEEP_LINKING_OPTIONS = new InjectionToken('DEEP_LINKING_OPTIONS');\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {InjectionToken} from '@angular/core';\n\nexport const JWT_GET_AND_SETTER = new InjectionToken('JWT_GET_AND_SETTER');\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {InjectionToken} from '@angular/core';\n\nexport const KEYCLOAK_OPTIONS = new InjectionToken('KEYCLOAK_OPTIONS');\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nexport interface AuthToken {\n  access_token: string;\n  expires_in: number;\n  id_token: string;\n  'not-before-policy': number;\n  refresh_expires_in: number;\n  refresh_token: string;\n  scope: string;\n  session_state: string;\n  token_type: string;\n\n  [key: string]: any;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nexport class DeepLinkConfig {\n  deepLinkingScheme: string;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nexport interface IDTokenDecoded {\n  jti: string;\n  exp: number;\n  nbf: number;\n  iat: number;\n  iss: string;\n  aud: string;\n  sub: string;\n  typ: string;\n  azp: string;\n  nonce: string;\n  auth_time: number;\n  session_state: string;\n  acr: string;\n  email_verified: boolean;\n  name: string;\n  preferred_username: string;\n  given_name: string;\n  family_name: string;\n  email: string;\n  avatarUrl: string;\n  mobileNumber: string;\n  description: string;\n\n  [key: string]: any;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {AuthToken} from './auth-token';\n\nexport interface JwtConfig {\n  setToken: (value: AuthToken) => void | Promise<void | null>;\n  getToken: () => AuthToken | null | Promise<AuthToken | null>;\n\n  headerName?: string;\n  authScheme?: string;\n  whitelistedDomains?: Array<string | RegExp>;\n  blacklistedRoutes?: Array<string | RegExp>;\n  throwNoTokenError?: boolean;\n  skipWhenExpired?: boolean;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {KeycloakJsonStructure} from './keycloak-json-structure';\n\nexport declare type FetchKeycloakJSON = () => KeycloakJsonStructure | Promise<KeycloakJsonStructure>;\n\nexport class KcConfig {\n  /**\n   * The same as the contain of the keycloak.json\n   * Example: jsonConfig: () => require('/path/to/keycloak.json')\n   */\n  jsonConfig?: FetchKeycloakJSON;\n\n  /**\n   * Example: scope='openid email offline_access address profile', the value would be\n   * 'openid email offline_access address profile' here\n   */\n  scope?: string;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nexport interface KeyValueStr {\n    [key: string]: string;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nexport interface KeycloakJsonStructure {\n  realm?: string;\n  'auth-server-url'?: string;\n  'ssl-required'?: string;\n  resource?: string;\n  clientId?: string;\n  url?: string;\n  credentials?: null | {\n    secret: string\n  };\n  'confidential-port'?: number;\n\n  [key: string]: any;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nexport interface KeycloakLoginResponse {\n    code: string;\n    redirectUri: string;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {Provider} from '@angular/core';\nimport {KcConfig} from './kc-config';\nimport {DeepLinkConfig} from './deep-link-config';\nimport {JwtConfig} from './jwt-config';\n\nexport class ModuleConfig {\n  kcOptionsProvider?: Provider;\n  jwtConfigProvider?: Provider;\n\n  keycloakConfig?: KcConfig;\n  deepLinksConfig: DeepLinkConfig;\n  jwtModuleOptions?: JwtConfig;\n}\n","export interface TokenDecoded {\n    jti: string;\n    exp: number;\n    nbf: number;\n    iat: number;\n    iss: string;\n    aud: string;\n    sub: string;\n    typ: string;\n    azp: string;\n    nonce: string;\n    auth_time: number;\n    session_state: string;\n    acr: string;\n    'allowed-origins': string[];\n    realm_access: RealmAccess;\n    resource_access: ResourceAccess;\n    scope: string;\n    email_verified: boolean;\n    name: string;\n    preferred_username: string;\n    given_name: string;\n    family_name: string;\n    email: string;\n}\n\nexport interface RealmAccess {\n    roles: string[];\n}\n\nexport interface ResourceAccess {\n    account: RealmAccess;\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {Injectable} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport {filter} from 'rxjs/operators';\nimport {DeeplinkMatch, Deeplinks} from '@ionic-native/deeplinks/ngx';\nimport {NavController} from '@ionic/angular';\nimport {KeyValueStr} from '../model/key-value-str';\n\n@Injectable()\nexport class DeepLinkService {\n\n  private paramsSubject = new Subject<string>();\n\n  constructor(private navController: NavController,\n              private deepLinks: Deeplinks) {\n  }\n\n  params() {\n    return this.paramsSubject\n      .pipe(filter(str => !!str));\n  }\n\n  init() {\n    this.deepLinks\n      .route({})\n      .subscribe(\n        (match: DeeplinkMatch) => {\n          // match.$route - the route we matched, which is the matched entry from the arguments to route()\n          // match.$args - the args passed in the link\n          // match.$link - the full link data\n          this.extractData(match.$link);\n        },\n        nomatch => {\n          // nomatch.$link - the full link data\n          this.extractData(nomatch.$link);\n        }\n      );\n  }\n\n  private extractData($link) {\n    if ($link) {\n      const {path, fragment, host, scheme, url} = $link;\n      if (this.containsCode(fragment)) {\n        const extractCode = this.extractCode(fragment);\n        this.nextParams(extractCode.code);\n      }\n    }\n  }\n\n  private extractCode(url: string) {\n    const hashes = url.slice(url.indexOf('?') + 1).split('&');\n    const paramsObj = hashes.reduce((params, hash) => {\n      const [key, val] = hash.split('=');\n      return Object.assign(params, {[key]: decodeURIComponent(val)});\n    }, {} as KeyValueStr);\n    if ((!paramsObj) || (!paramsObj.code)) {\n      return;\n    }\n    paramsObj.code = (paramsObj.code as string).split('#')[0];\n    return paramsObj;\n  }\n\n  private nextParams(code: string) {\n    this.paramsSubject.next(code);\n  }\n\n  private containsCode(fragment: string) {\n    if (!fragment) {\n      return false;\n    }\n    return fragment.indexOf('code') > -1;\n  }\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {Inject, Injectable} from '@angular/core';\nimport {JwtConfig} from '../model/jwt-config';\nimport {AuthToken} from '../model/auth-token';\nimport {JWT_GET_AND_SETTER} from '../contant/jwt-injection-token';\n\n@Injectable()\nexport class StorageService {\n\n  constructor(\n    @Inject(JWT_GET_AND_SETTER) private config: JwtConfig,\n  ) {\n  }\n\n  public async setToken(value: AuthToken): Promise<void> {\n    return this.config.setToken(value);\n  }\n\n  public async getToken(): Promise<AuthToken> {\n    return this.config.getToken();\n  }\n\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {Inject, Injectable} from '@angular/core';\nimport {HttpClient, HttpHeaders, HttpParams} from '@angular/common/http';\nimport {DeepLinkService} from './deep-link.service';\nimport {StorageService} from './storage.service';\nimport {BrowserTab} from '@ionic-native/browser-tab/ngx';\nimport {JwtHelperService} from '@auth0/angular-jwt';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport * as Keycloak_ from 'keycloak-js';\nimport {KeycloakLoginOptions} from 'keycloak-js';\nimport {InAppBrowser} from '@ionic-native/in-app-browser/ngx';\nimport {Router} from '@angular/router';\nimport {IDTokenDecoded} from '../model/id-token-decoded';\nimport {FetchKeycloakJSON, KcConfig} from '../model/kc-config';\nimport {KeycloakJsonStructure} from '../model/keycloak-json-structure';\nimport {DeepLinkConfig} from '../model/deep-link-config';\nimport {AuthToken} from '../model/auth-token';\nimport {TokenDecoded} from '../model/token-decoded';\nimport {KeycloakLoginResponse} from '../model/keycloak-login-response';\nimport {KEYCLOAK_OPTIONS} from '../contant/kc-injection-token';\nimport {DEEP_LINKING_OPTIONS} from '../contant/deep-linking-config-injection-token';\n\n// Workaround from https://github.com/ng-packagr/ng-packagr/issues/343#issuecomment-350965445\nconst Keycloak = Keycloak_;\nconst jwtHelperService: JwtHelperService = new JwtHelperService();\n\n@Injectable()\nexport class KeycloakAuthService {\n\n  private subject: BehaviorSubject<IDTokenDecoded>;\n  private scope: string;\n  private readonly appPrefix: string;\n  private readonly keycloakConfig: FetchKeycloakJSON;\n  private actualKeycloakConfig: KeycloakJsonStructure;\n  private keycloakInstance: Keycloak_.KeycloakInstance;\n\n  constructor(\n    @Inject(DEEP_LINKING_OPTIONS) deepLinkConfig: DeepLinkConfig,\n    @Inject(KEYCLOAK_OPTIONS) kcConfig: KcConfig,\n    protected http: HttpClient,\n    protected browserTab: BrowserTab,\n    protected router: Router,\n    protected storage: StorageService,\n    protected inAppBrowser: InAppBrowser,\n    protected deepLinkService: DeepLinkService,\n  ) {\n    this.scope = kcConfig.scope;\n    this.keycloakConfig = kcConfig.jsonConfig;\n    this.appPrefix = `${deepLinkConfig.deepLinkingScheme}://app`;\n  }\n\n  /**\n   *\n   */\n  public user(): Observable<IDTokenDecoded> {\n    if (!this.subject) {\n      this.subject = new BehaviorSubject<IDTokenDecoded>(null);\n    }\n    return this.subject.asObservable();\n  }\n\n  /**\n   *\n   */\n  public async init() {\n    await this.initKeycloak();\n    return this.refresh();\n  }\n\n  /**\n   *\n   */\n  public async logout() {\n    await this.handleNewToken(null);\n    const url: string = this.getLogoutUrl();\n    return new Promise<void>(async (resolve, reject) => {\n      if (await this.browserTab.isAvailable()) {\n        this.browserTab.openUrl(url)\n          .then(() => this.browserTab.close())\n          .catch(err => reject(err));\n        resolve();\n      } else {\n        const browser = this.inAppBrowser.create(url, '_system');\n        const sub = browser.on('loadstop')\n          .subscribe(() => {\n            browser.close();\n            resolve();\n            sub.unsubscribe();\n          }, err => {\n            reject(err);\n            sub.unsubscribe();\n          });\n      }\n    });\n  }\n\n  /**\n   *\n   * @param isLogin\n   * @param redirectUrl\n   */\n  public async login(isLogin: boolean = true, redirectUrl?: string): Promise<AuthToken> {\n    try {\n      if (redirectUrl[0] === '/') {\n        redirectUrl = redirectUrl.substr(1);\n      }\n      const response = await this.beginLoginAndGetCode(redirectUrl, isLogin);\n      return this.continueLoginWithCode(response);\n    } catch (err) {\n      const context = {messageError: 'Ionic Keycloak Error: error by login'};\n      Object.assign(err, {context});\n      throw err;\n    }\n  }\n\n\n  /**\n   *\n   * @param refresh\n   */\n  public async getToken(refresh = false) {\n    let authToken = await this.storage.getToken();\n    if (!authToken) {\n      return null;\n    }\n    if (refresh || jwtHelperService.isTokenExpired(authToken.access_token, 10)) {\n      authToken = await this.refresh();\n    }\n    return authToken.access_token;\n  }\n\n  public async getTokenDecoded(refresh = false): Promise<TokenDecoded> {\n    const token = await this.getToken(refresh);\n    return jwtHelperService.decodeToken(token) as TokenDecoded;\n  }\n\n  private getLogoutUrl(redirectUrl = this.router.url): string {\n    return this.keycloakInstance.createLogoutUrl({\n      redirectUri: this.appPrefix + encodeURIComponent(redirectUrl)\n    });\n  }\n\n  private async getKcJsonStructure(): Promise<KeycloakJsonStructure> {\n    const prom = this.keycloakConfig();\n    let config: KeycloakJsonStructure;\n    if (prom instanceof Promise) {\n      config = await prom;\n    } else {\n      config = prom;\n    }\n    /**\n     * This line because the init method needs the clientId and url to work\n     * which are the resource and the auth-server-url respectively\n     */\n    config.clientId = config.resource;\n    config.url = config['auth-server-url'];\n    return config;\n  }\n\n  private async handleNewToken(authToken: AuthToken) {\n    if (authToken) {\n      const user: IDTokenDecoded = jwtHelperService.decodeToken(authToken.id_token || authToken.access_token);\n      if (!this.subject) {\n        this.subject = new BehaviorSubject<IDTokenDecoded>(user);\n      }\n      this.subject.next(user);\n      await this.storage.setToken(authToken);\n    } else {\n      if (!this.subject) {\n        this.subject = new BehaviorSubject<IDTokenDecoded>(null);\n      }\n      this.subject.next(null);\n      await this.storage.setToken(null);\n    }\n  }\n\n  private createPostRequest(uri: string, body: any, options?: {\n    headers?: HttpHeaders | {\n      [header: string]: string | string[];\n    };\n  }) {\n    return this.http.post<AuthToken>(uri, body, options).toPromise();\n  }\n\n  private getRefreshParams(refreshToken: string) {\n    const params = new HttpParams()\n      .set('grant_type', 'refresh_token')\n      .set('refresh_token', refreshToken)\n      .set('client_id', encodeURIComponent(this.keycloakInstance.clientId));\n    const secret = this.keycloakInstance.clientSecret;\n    if (secret) {\n      return params\n        .set('client_secret', encodeURIComponent(secret));\n    }\n    return params;\n  }\n\n  private getAccessTokenParams(code: string, redirectUrl: string) {\n    let redirectUri = new HttpParams()\n      .set('grant_type', 'authorization_code')\n      .set('code', code)\n      .set('client_id', encodeURIComponent(this.keycloakInstance.clientId))\n      .set('redirect_uri', redirectUrl);\n    if (this.scope || (this.actualKeycloakConfig && this.actualKeycloakConfig.scope)) {\n      redirectUri = redirectUri.set('scope', this.scope || this.actualKeycloakConfig.scope);\n    }\n\n    const secret = this.keycloakInstance.clientSecret;\n    if (secret) {\n      redirectUri = redirectUri.set('client_secret', encodeURIComponent(secret));\n    }\n    return redirectUri;\n  }\n\n  private getTokenRequestHeaders() {\n    const headers = new HttpHeaders()\n      .set('Content-Type', 'application/x-www-form-urlencoded');\n\n    const clientSecret = this.keycloakInstance.clientSecret;\n    const clientId = this.keycloakInstance.clientId;\n    if (clientId && clientSecret) {\n      headers.set('Authorization', 'Basic ' + btoa(clientId + ':' + clientSecret));\n    }\n    return headers;\n  }\n\n  private async refresh(): Promise<AuthToken> {\n    try {\n      let tokens: AuthToken = await this.storage.getToken();\n      if (tokens) {\n        if (!this.isValidToken(tokens)) {\n          const uri = this.getTokenUrl();\n          const headers = this.getTokenRequestHeaders();\n          const body = this.getRefreshParams(tokens.refresh_token);\n          tokens = await this.createPostRequest(uri, body, {headers});\n        }\n      }\n      this.handleNewToken(tokens);\n      return tokens;\n    } catch (e) {\n      await this.logout();\n      return null;\n    }\n  }\n\n  private getTokenUrl() {\n    return `${this.keycloakInstance.authServerUrl}/realms/${this.keycloakInstance.realm}/protocol/openid-connect/token`;\n  }\n\n  private isValidToken(authToken: AuthToken) {\n    if (!authToken) {\n      return false;\n    }\n    return jwtHelperService.isTokenExpired(authToken.access_token, 10);\n  }\n\n  private async initKeycloakInstance() {\n    const keycloakConfig = await this.getKcJsonStructure();\n    this.actualKeycloakConfig = keycloakConfig;\n    this.keycloakInstance = Keycloak(keycloakConfig);\n  }\n\n  private async initKeycloak() {\n    await this.initKeycloakInstance();\n\n    this.keycloakInstance\n      .init({\n        adapter: 'cordova-native',\n        redirectUri: this.appPrefix + '/'\n      });\n  }\n\n  private async beginLoginAndGetCode(path: string, login = true): Promise<KeycloakLoginResponse> {\n    path = `${this.appPrefix}/${path}`;\n    await this.storage.setToken(null);\n\n    const options: KeycloakLoginOptions = {\n      redirectUri: path\n    };\n    const url: string = login\n      ? this.keycloakInstance.createLoginUrl(options)\n      : this.keycloakInstance.createRegisterUrl(options);\n\n    if (await this.browserTab.isAvailable()) {\n      this.browserTab.openUrl(url);\n    } else {\n      this.inAppBrowser.create(url, '_system');\n    }\n\n    return new Promise<KeycloakLoginResponse>((resolve, reject) => {\n      const sub = this.deepLinkService\n        .params()\n        .subscribe(code => {\n          resolve({code, redirectUri: path});\n          sub.unsubscribe();\n        }, error => {\n          reject(error);\n          sub.unsubscribe();\n        });\n    });\n  }\n\n  private async continueLoginWithCode({code, redirectUri: redirectUrl}: KeycloakLoginResponse): Promise<AuthToken> {\n    this.browserTab.close()\n      .catch((err = {}) => {\n        const context = {message: 'Error while closing the browser'};\n        console.log(context.message, err);\n        Object.assign(err, {context});\n        throw err;\n      });\n    const uri = this.getTokenUrl();\n    const body = this.getAccessTokenParams(code, redirectUrl);\n    const headers = this.getTokenRequestHeaders();\n    return this.createPostRequest(uri, body, {headers})\n      .then(async authToken => {\n        this.handleNewToken(authToken);\n        return authToken;\n      });\n  }\n\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {Inject, Injectable} from '@angular/core';\nimport {JwtHelperService, JwtInterceptor} from '@auth0/angular-jwt';\nimport {KeycloakAuthService} from './keycloak-auth.service';\nimport {JwtConfig} from '../model/jwt-config';\nimport {JWT_GET_AND_SETTER} from '../contant/jwt-injection-token';\n\n@Injectable()\nexport class KcTokenInterceptorService extends JwtInterceptor {\n\n  constructor(\n    @Inject(JWT_GET_AND_SETTER) private config: JwtConfig,\n    private keycloakAuthService: KeycloakAuthService\n  ) {\n    super(config, new JwtHelperService());\n    this.initTokenGetter();\n  }\n\n  private initTokenGetter() {\n    this.tokenGetter = () => this.keycloakAuthService.getToken();\n  }\n\n}\n","/*\n * Copyright (c) 2019. This Code is under license and belongs to Coding Motion\n */\n\nimport {ModuleWithProviders, NgModule, Optional, SkipSelf} from '@angular/core';\nimport {Platform} from '@ionic/angular';\nimport {NativeStorage} from '@ionic-native/native-storage/ngx';\nimport {BrowserTab} from '@ionic-native/browser-tab/ngx';\nimport {JwtHelperService} from '@auth0/angular-jwt';\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\nimport {Deeplinks} from '@ionic-native/deeplinks/ngx';\nimport {InAppBrowser} from '@ionic-native/in-app-browser/ngx';\nimport {DeepLinkService} from './service/deep-link.service';\nimport {KeycloakAuthService} from './service/keycloak-auth.service';\nimport {StorageService} from './service/storage.service';\nimport {KcTokenInterceptorService} from './service/kc-token-interceptor.service';\nimport {ModuleConfig} from './model/module-config';\nimport {JWT_GET_AND_SETTER} from './contant/jwt-injection-token';\nimport {KEYCLOAK_OPTIONS} from './contant/kc-injection-token';\nimport {DEEP_LINKING_OPTIONS} from './contant/deep-linking-config-injection-token';\n\n@NgModule()\nexport class IonicKeycloakAuthModule {\n\n  constructor(\n    private platform: Platform,\n    private authService: KeycloakAuthService,\n    private deepLinkService: DeepLinkService,\n    @Optional() @SkipSelf() parentModule: IonicKeycloakAuthModule\n  ) {\n    if (parentModule) {\n      throw new Error('JwtModule is already loaded. It should only be imported in your application\\'s main module.');\n    }\n    this.platform\n      .ready()\n      .then(() => this.authService.init())\n      .then(() => this.deepLinkService.init())\n      .catch((err = {}) => {\n        const context = {messageError: 'Ionic Keycloak Error: could not initialize the app'};\n        Object.assign(err, {context});\n        throw err;\n      });\n  }\n\n  public static forRoot(config = new ModuleConfig()): ModuleWithProviders {\n    return {\n      ngModule: IonicKeycloakAuthModule,\n      providers: [\n        Deeplinks,\n        BrowserTab,\n        InAppBrowser,\n        NativeStorage,\n        HttpClientModule,\n        config.kcOptionsProvider || {provide: KEYCLOAK_OPTIONS, useValue: config.keycloakConfig},\n        config.jwtConfigProvider || {provide: JWT_GET_AND_SETTER, useValue: config.jwtModuleOptions},\n        {provide: DEEP_LINKING_OPTIONS, useValue: config.deepLinksConfig},\n        StorageService,\n        DeepLinkService,\n        KeycloakAuthService,\n        JwtHelperService,\n        {\n          provide: HTTP_INTERCEPTORS,\n          useClass: KcTokenInterceptorService,\n          multi: true\n        },\n      ]\n    };\n  }\n\n}\n\n"],"names":[],"mappings":"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"}